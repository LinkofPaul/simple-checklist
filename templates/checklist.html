{% extends "base.html" %}

{% block body %}
<p>{{name}}</p>
{% for task in tasks %}
<ul>
    <li onmouseover="show_remove_button('{{task.index}}');" onmouseout="hide_remove_button('{{task.index}}');">
        <form action="/checklist/process_task" method="post">
            <input type="hidden" value="{{name}}" name="checklist_name">
            <input type="hidden" value="{{task.name}}" name="task_name">
            {% if task.done %} 
                <p style="text-decoration: line-through; display: inline; font-family: Courier New;">
                    {{task.name}}
                </p> 
                <p style="display: inline; font-weight: bold; font-family: Courier New;" id="{{task.index + 'dots'}}"> 
                    <script type="text/javascript">
                        var p_elem = document.getElementById("{{task.index + 'dots'}}");
                        var dots = "";
                        var len_dots = 39 - "{{task.name}}".length;
                        for(let i = 0; i < len_dots; i++){
                            dots = dots + "."
                        }
                        p_elem.innerHTML = dots;
                    </script>
                </p>
                <input type="submit" name="check_button" value="not done">
                <input type="submit" class="task_remove_button" name="task_remove_button" id="{{task.index}}" value="X">
            {% else %}
                <p style="display: inline; font-family: Courier New;">
                    {{task.name}} 
                </p>
                <p style="display: inline; font-weight: bold; font-family: Courier New;" id="{{task.index + 'dots'}}"> 
                    <script type="text/javascript">
                        var p_elem = document.getElementById("{{task.index + 'dots'}}");
                        var dots = "";
                        var len_dots = 39 - "{{task.name}}".length;
                        for(let i = 0; i < len_dots; i++){
                            dots = dots + "."
                        }
                        p_elem.innerHTML = dots;
                    </script>
                </p>
                <input type="submit" name="check_button" value="done">
                <input type="submit"  class="task_remove_button" name="task_remove_button" id="{{task.index}}" value="X">
            {% endif %}
        </form>
    </li>
</ul>
{% endfor %}
<form action="/checklist/add_task" method="post" id="createTaskForm">
    <input type="hidden" name="name" value="{{name}}" id="checklistforTaskId">
    <input type="text" name="newTask" maxlength="40" id="newTaskId" required><input type="submit" value="add">
</form>
<div id="taskTakenDiv" style="display: none; color:red">Task already added</div>
{% endblock %}